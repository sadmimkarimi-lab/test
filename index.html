<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>L'avenir Art Academy - Certificate Verification</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>

  :root{
    --bg:#161217;
    --panel:#1e1a1c;
    --accent:#ff057a;
    --muted:#bbb;
    --white:#fff;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:'Poppins',sans-serif;
    background:var(--bg);
    color:var(--white);
    text-align:center;
  }

  .container{
    max-width:900px;
    margin:0 auto; 
    padding:30px 20px; 
  }

  .header {
    display:flex;
    gap:10px;
    align-items:center;
    justify-content:center;
    margin-bottom:20px;
  }
  .header img{ 
    width:60px; 
    height:auto; 
  }
  .header h1{ 
    margin:0; 
    font-size:22px; 
    color:var(--white);
   }

  .info{ 
    color:var(--muted); 
    line-height:1.6; 
    margin-bottom:20px; 
    font-size:15px; 
  }

  /* Search area */
  .search-area {
    display:flex;
    justify-content:center;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
    margin-bottom:12px;
  }
  .search-box {
    padding:12px 16px;
    border-radius:6px;
    border:1px solid #9b3232;
    outline:none;
    width:250px;
    background:#ffffff;
    color:var(--accent);
    font-size:15px;
  }
  .btn {
    padding:12px 25px;
    border-radius:25px;
    border:none;
    background:linear-gradient(180deg,var(--accent));
    color:#fff;
    font-weight:600;
    cursor:pointer;
  }
  .btn:hover { opacity:0.95; }

  /* result panel (separate, not inside search area) */
  .result-box {
    display:none;
    background:var(--panel);
    border-radius:12px;
    padding:20px;
    margin:12px auto 0;
    width:100%;
    max-width:760px;
    text-align:left;
    box-shadow:0 6px 20px rgb(177, 113, 113);
  }
  .result-box img{ 
    width:120px; 
    height:120px; 
    border-radius:8px; 
    object-fit:cover; 
    margin-top:10px; 
    display:block; 
  }

  .field{ 
    margin-bottom:8px; 
  }

  .field .label{ 
    font-weight:600;
    color:var(--accent); 
    display:inline-block;
    width:140px; 
  }

  .field .value{ 
    margin-left:6px; 
    font-weight:500; 
    color:#ffffff; 
  }

  /* student form */
  #studentForm{ 
    display:none; 
    margin-top:18px; 
    background:transparent; 
    max-width:760px; 
    margin-left:auto; 
    margin-right:auto; 
    padding:16px; 
    border-radius:8px; 
    text-align:left; 
  }

  #studentForm .row{ 
    display:flex; 
    gap:12px; 
    margin-bottom:10px; 
    flex-wrap:wrap; 
  }

  #studentForm input, 
  #studentForm textarea{ 
    flex:1 1 220px; 
    padding:10px 12px; 
    border-radius:6px; 
    border:1px solid #410519; 
    background:#0e0000; 
    color:var(--accent); 
  }
  #studentForm textarea{ 
    min-height:60px; 
    resize:vertical; 
  }
  .small { width:180px; }

  /* custom file button */
  input[type="file"]{ display:none; }
  #uploadBtn {
      padding: 10px 14px;
      background-color: var(--accent);
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
  }
  #fileName { 
    margin-left:10px; 
    color:var(--white); 
    font-size:14px; 
    vertical-align:middle; 
  }

  /* corner buttons */
  .corner-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      margin-left: 10px;
      padding: 10px 18px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      font-family: 'Poppins', sans-serif;
      transition: 0.3s;
      z-index: 999;
  }
  .add-news-btn{ 

    background: var(--save-btn-color)!important;
    color: white; 
  }
  .home-btn{ 
    right:140px; 
    background:var(--accent); 
    color:#fff; 
  }
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <img src="logo.png" alt="Logo">
    <h1>L'avenir International Art Academy</h1>
  </div>
  <div class="info">
      To verify the authenticity of certificates issued by Lavenir Art Academy, please enter the registry code printed on the certificate below.<br>
      If no information is displayed, or if information belonging to another individual appears, the certificate is invalid.
  </div>

    <div class="search-area">
      <button class="btn" id="searchBtn">Register Code Search</button>
      <input id="search" class="search-box" placeholder="">
      <button class="btn" id="clearBtn" style="background:#444;">Clear</button>
    </div>

  <div id="result" class="result-box" aria-live="polite" style="display:none;"></div>

  <form id="studentForm">
    <div class="row">
      <input id="newCode" placeholder="Code" class="small" required>
      <input id="newName" placeholder="Full Name" required>
    </div>
    <div class="row">
      <input id="newCourse" placeholder="Course">
      <input id="newCountry" placeholder="Country" class="small">
    </div>
    <div class="row">
      <input id="newTotalDuration" placeholder="Total Duration" class="small">
      <input id="newCourseMaster" placeholder="Course Master">
    </div>
    <div class="row">
      <input id="newYear" placeholder="Year" class="small">
      <textarea id="newMoreDetails" placeholder="More Details"></textarea>
    </div>
    <div class="row" style="align-items:center;">
      <label for="newPhotoFile" class="btn">Choose Photo</label>
      <input type="file" id="newPhotoFile" accept="image/*">
      <span id="fileName"></span>
    </div>
    <div class="row" style="align-items:center;">
      <img id="photoPreview" alt="preview" style="width:120px;height:120px;border-radius:8px;object-fit:cover;">
    </div>
    <div>
      
      <button type="button" class="btn save-news-btn" id="saveStudentBtn">Save</button>
      <button type="button" class="btn" id="cancelStudentBtn" style="background:#777;">Cancel</button>

    </div>

  </form>
</div>

<button class="corner-btn" id="toggleFormBtn">Add News +</button>
<button class="corner-btn home-btn" id="goHomeBtn">Home</button>

<script>
document.addEventListener('DOMContentLoaded', function(){

  // ---------- state ----------
  let students = [];
  let selectedPhoto = "";
  const STORAGE_KEY = 'lavenir_students_v1';

  // ---------- DOM ----------
  const searchInput = document.getElementById('search');
  const searchBtn = document.getElementById('searchBtn');
  const clearBtn = document.getElementById('clearBtn');
  const resultBox = document.getElementById('result');

  const studentForm = document.getElementById('studentForm');
  const toggleFormBtn = document.getElementById('toggleFormBtn');
  const goHomeBtn = document.getElementById('goHomeBtn');
  const newCode = document.getElementById('newCode');
  const newName = document.getElementById('newName');
  const newCourse = document.getElementById('newCourse');
  const newCountry = document.getElementById('newCountry');
  const newTotalDuration = document.getElementById('newTotalDuration');
  const newCourseMaster = document.getElementById('newCourseMaster');
  const newYear = document.getElementById('newYear');
  const newMoreDetails = document.getElementById('newMoreDetails');
  const newPhotoFile = document.getElementById('newPhotoFile');
  const photoPreview = document.getElementById('photoPreview');
  const fileNameSpan = document.getElementById('fileName');
  const saveStudentBtn = document.getElementById('saveStudentBtn');
  const cancelStudentBtn = document.getElementById('cancelStudentBtn');

  // ---------- helpers ----------
  function norm(s){ return String(s||"").toLowerCase().trim(); }
  function saveToStorage(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(students)); }
  function loadFromStorage(){ 
    const raw = localStorage.getItem(STORAGE_KEY); 
    if(raw) students = JSON.parse(raw);
  }

  // ---------- seed data (optional) ----------
  function seedData() {
    if(students.length === 0){
      students.push(
        {code:"18601", fullName:"Yasaman Molaei", course:"Advanced Ballet Course", country:"Iran", totalDuration:"6 Hour’s", courseMaster:"Rusa Kviciani", year:"2024", moreDetails:"Completed all course requirements successfully", photo:"yasaman.jpg" }
      );
      saveToStorage();
    }
  }

  // ---------- file input ----------
  newPhotoFile.addEventListener('change', function(){
    const file = this.files[0];
    if(!file) return;
    fileNameSpan.textContent = file.name;
    const reader = new FileReader();
    reader.onload = function(e){
      selectedPhoto = e.target.result;
      photoPreview.src = selectedPhoto;
      photoPreview.style.display = 'block';
    };
    reader.readAsDataURL(file);
  });

  // ---------- add student ----------
  function addStudent(){
    const codeVal = newCode.value.trim();
    if(!codeVal){ alert('Please enter Code'); newCode.focus(); return; }
    if(students.some(s=>norm(s.code)===norm(codeVal))){
      if(!confirm('A student with this code already exists. Add anyway?')) return;
    }
    const newStudent = {
      code: codeVal,
      fullName: newName.value.trim(),
      course: newCourse.value.trim(),
      country: newCountry.value.trim(),
      totalDuration: newTotalDuration.value.trim(),
      courseMaster: newCourseMaster.value.trim(),
      year: newYear.value.trim(),
      moreDetails: newMoreDetails.value.trim(),
      photo: selectedPhoto || ""
    };
    students.push(newStudent);
    saveToStorage();
    studentForm.reset();
    selectedPhoto = "";
    photoPreview.style.display = 'none';
    fileNameSpan.textContent = '';
    alert('Student saved.');
    searchInput.value = newStudent.code;
    doSearch();
  }

  // ---------- search ----------
  function doSearch() {
    const query = norm(searchInput.value);
    const found = students.find(s => norm(s.code) === query || norm(s.fullName) === query);
    if(found){
      resultBox.style.display = 'block';
      resultBox.innerHTML = `
        <div><strong>Code:</strong> ${found.code}</div>
        <div><strong>Full Name:</strong> ${found.fullName}</div>
        <div><strong>Course:</strong> ${found.course}</div>
        <div><strong>Country:</strong> ${found.country}</div>
        <div><strong>Total Duration:</strong> ${found.totalDuration}</div>
        <div><strong>Course Master:</strong> ${found.courseMaster}</div>
        <div><strong>Year:</strong> ${found.year}</div>
        <div><strong>More Details:</strong> ${found.moreDetails}</div>
        ${found.photo ? `<img src="${found.photo}" style="width:120px;height:120px;border-radius:8px;margin-top:8px;">` : ''}
      
      `;
    } else {
      resultBox.style.display = 'block';
      resultBox.innerHTML = '<em style="color:#ff3b7f;">Registry code or name not found.</em>';
    }
  }

  // ---------- UI wiring ----------
  searchBtn.addEventListener('click', doSearch);
  searchInput.addEventListener('keydown', function(e){ if(e.key==='Enter'){ e.preventDefault(); doSearch(); } });
  clearBtn.addEventListener('click', function(){ searchInput.value=''; resultBox.style.display='none'; resultBox.innerHTML=''; });

  saveStudentBtn.addEventListener('click', addStudent);
  cancelStudentBtn.addEventListener('click', function(){ studentForm.reset(); selectedPhoto=''; photoPreview.style.display='none'; fileNameSpan.textContent=''; studentForm.style.display='none'; });

  toggleFormBtn.addEventListener('click', function(){ studentForm.style.display = (studentForm.style.display==='none' || studentForm.style.display==='') ? 'block' : 'none'; });

  // اصلاح کد دکمه Home
  goHomeBtn.addEventListener('click', function(){
    window.location.assign('http://www.laveniraa.com');  // اینجا URL مورد نظر خود را وارد کنید
  });

  // ---------- load stored data ----------
  loadFromStorage();
  seedData();
  resultBox.style.display='none';

});
</script>
</body>
</html>
